apiVersion: provisioning.dpu.nvidia.com/v1alpha1
kind: DPUFlavor
metadata:
  name: flavor
  namespace: dpf-operator-system
spec:
  bfcfgParameters:
    - UPDATE_ATF_UEFI=yes
    - UPDATE_DPU_OS=yes
    - WITH_NIC_FW_UPDATE=yes
  grub:
    kernelParameters:
      - console=hvc0
      - console=ttyAMA0
      - earlycon=pl011,0x13010000
      - fixrttc
      - net.ifnames=0
      - biosdevname=0
      - iommu.passthrough=1
      - cgroup_no_v1=net_prio,net_cls
      - hugepagesz=2048kB
      - hugepages=8072
  nvconfig:
    - device: '*'
      parameters:
        - PF_BAR2_ENABLE=0
        - PER_PF_NUM_SF=1
        - PF_TOTAL_SF=20
        - PF_SF_BAR_SIZE=10
        - NUM_PF_MSIX_VALID=0
        - PF_NUM_PF_MSIX_VALID=1
        - PF_NUM_PF_MSIX=228
        - INTERNAL_CPU_MODEL=1
        - INTERNAL_CPU_OFFLOAD_ENGINE=0
        - SRIOV_EN=1
        - NUM_OF_VFS=<NUM_VFS>
        - LAG_RESOURCE_ALLOCATION=1
        - NUM_VF_MSIX=48
  ovs:
    rawConfigScript: IyEvYmluL2Jhc2gKX292cy12c2N0bCgpIHsKICBvdnMtdnNjdGwgLS1uby13YWl0IC0tdGltZW91dCAxNSAiJEAiCn0KCl9vdnMtdnNjdGwgc2V0IE9wZW5fdlN3aXRjaCAuIG90aGVyX2NvbmZpZzpkb2NhLWluaXQ9dHJ1ZQpfb3ZzLXZzY3RsIHNldCBPcGVuX3ZTd2l0Y2ggLiBvdGhlcl9jb25maWc6ZHBkay1tYXgtbWVtem9uZXM9NTAwMDAKX292cy12c2N0bCBzZXQgT3Blbl92U3dpdGNoIC4gb3RoZXJfY29uZmlnOmh3LW9mZmxvYWQ9dHJ1ZQpfb3ZzLXZzY3RsIHNldCBPcGVuX3ZTd2l0Y2ggLiBvdGhlcl9jb25maWc6cG1kLXF1aWV0LWlkbGU9dHJ1ZQpfb3ZzLXZzY3RsIHNldCBPcGVuX3ZTd2l0Y2ggLiBvdGhlcl9jb25maWc6bWF4LWlkbGU9MjAwMDAKX292cy12c2N0bCBzZXQgT3Blbl92U3dpdGNoIC4gb3RoZXJfY29uZmlnOm1heC1yZXZhbGlkYXRvcj01MDAwCl9vdnMtdnNjdGwgLS1pZi1leGlzdHMgZGVsLWJyIG92c2JyMQpfb3ZzLXZzY3RsIC0taWYtZXhpc3RzIGRlbC1iciBvdnNicjIKX292cy12c2N0bCAtLW1heS1leGlzdCBhZGQtYnIgYnItc2ZjCl9vdnMtdnNjdGwgc2V0IGJyaWRnZSBici1zZmMgZGF0YXBhdGhfdHlwZT1uZXRkZXYKX292cy12c2N0bCBzZXQgYnJpZGdlIGJyLXNmYyBmYWlsX21vZGU9c2VjdXJlCl9vdnMtdnNjdGwgLS1tYXktZXhpc3QgYWRkLXBvcnQgYnItc2ZjIHAwCl9vdnMtdnNjdGwgc2V0IEludGVyZmFjZSBwMCB0eXBlPWRwZGsKX292cy12c2N0bCBzZXQgSW50ZXJmYWNlIHAwIG10dV9yZXF1ZXN0PTkyMTYKX292cy12c2N0bCBzZXQgUG9ydCBwMCBleHRlcm5hbF9pZHM6ZHBmLXR5cGU9cGh5c2ljYWwKX292cy12c2N0bCAtLW1heS1leGlzdCBhZGQtcG9ydCBici1zZmMgcDEKX292cy12c2N0bCBzZXQgSW50ZXJmYWNlIHAxIHR5cGU9ZHBkawpfb3ZzLXZzY3RsIHNldCBJbnRlcmZhY2UgcDEgbXR1X3JlcXVlc3Q9OTIxNgpfb3ZzLXZzY3RsIHNldCBQb3J0IHAxIGV4dGVybmFsX2lkczpkcGYtdHlwZT1waHlzaWNhbAoKIyBBY3RpdmF0ZSBET0NBIGZvciBPVk5LCl9vdnMtdnNjdGwgc2V0IE9wZW5fdlN3aXRjaCAuIGV4dGVybmFsLWlkczpvdm4tYnJpZGdlLWRhdGFwYXRoLXR5cGU9bmV0ZGV2CiMgc2V0dXAgb3Zua3ViZSBtYW5hZ2VkIGJyaWRnZSwgYnItZHB1ICh0aGlzIGNvcnJlc3BvbmRzIHRvIGJyLWV4IG9uIG92bmsgZG9jcykKX292cy12c2N0bCAtLW1heS1leGlzdCBhZGQtYnIgYnItZHB1Cl9vdnMtdnNjdGwgYnItc2V0LWV4dGVybmFsLWlkIGJyLWRwdSBicmlkZ2UtaWQgYnItZHB1Cl9vdnMtdnNjdGwgYnItc2V0LWV4dGVybmFsLWlkIGJyLWRwdSBicmlkZ2UtdXBsaW5rIHBicmRwdXRvYnJvdm4KX292cy12c2N0bCBzZXQgYnJpZGdlIGJyLWRwdSBkYXRhcGF0aF90eXBlPW5ldGRldgpfb3ZzLXZzY3RsIHNldCBicmlkZ2UgYnItZHB1IG10dV9yZXF1ZXN0PTkyMTYKX292cy12c2N0bCAtLW1heS1leGlzdCBhZGQtcG9ydCBici1kcHUgcGYwaHBmCl9vdnMtdnNjdGwgc2V0IEludGVyZmFjZSBwZjBocGYgbXR1X3JlcXVlc3Q9OTIxNgpfb3ZzLXZzY3RsIHNldCBJbnRlcmZhY2UgcGYwaHBmIHR5cGU9ZHBkawoKIyBDcmVhdGUgc3dpdGNoaW5nIE9WUyBicmlkZ2UgaW4gYmV0d2VlbiB0aGUgU0MgbWFuYWdlZCBicmlkZ2UgYW5kIE9WTksKX292cy12c2N0bCAtLW1heS1leGlzdCBhZGQtYnIgYnItb3ZuCl9vdnMtdnNjdGwgc2V0IGJyaWRnZSBici1vdm4gZGF0YXBhdGhfdHlwZT1uZXRkZXYKX292cy12c2N0bCBzZXQgSW50ZXJmYWNlIGJyLW92biBtdHVfcmVxdWVzdD05MDAwCl9vdnMtdnNjdGwgLS1tYXktZXhpc3QgYWRkLXBvcnQgYnItb3ZuIHBicm92bnRvYnJkcHUKX292cy12c2N0bCAtLW1heS1leGlzdCBhZGQtcG9ydCBici1kcHUgcGJyZHB1dG9icm92bgoKIyBQYXRjaCBici1vdm4gYW5kIGJyLWRwdSB0b2dldGhlcgpfb3ZzLXZzY3RsIHNldCBpbnRlcmZhY2UgcGJyb3ZudG9icmRwdSB0eXBlPXBhdGNoIG9wdGlvbnM6cGVlcj1wYnJkcHV0b2Jyb3ZuCl9vdnMtdnNjdGwgc2V0IGludGVyZmFjZSBwYnJkcHV0b2Jyb3ZuIHR5cGU9cGF0Y2ggb3B0aW9uczpwZWVyPXBicm92bnRvYnJkcHUK