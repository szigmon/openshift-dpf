apiVersion: provisioning.dpu.nvidia.com/v1alpha1
kind: DPUFlavor
metadata:
  name: flavor
  namespace: dpf-operator-system
spec:
  bfcfgParameters:
    - UPDATE_ATF_UEFI=yes
    - UPDATE_DPU_OS=yes
    - WITH_NIC_FW_UPDATE=yes
  grub:
    kernelParameters:
      - console=hvc0
      - console=ttyAMA0
      - earlycon=pl011,0x13010000
      - fixrttc
      - net.ifnames=0
      - biosdevname=0
      - iommu.passthrough=1
      - cgroup_no_v1=net_prio,net_cls
      - hugepagesz=2048kB
      - hugepages=8072
  nvconfig:
    - device: '*'
      parameters:
        - PF_BAR2_ENABLE=0
        - PER_PF_NUM_SF=1
        - PF_TOTAL_SF=20
        - PF_SF_BAR_SIZE=10
        - NUM_PF_MSIX_VALID=0
        - PF_NUM_PF_MSIX_VALID=1
        - PF_NUM_PF_MSIX=228
        - INTERNAL_CPU_MODEL=1
        - INTERNAL_CPU_OFFLOAD_ENGINE=0
        - SRIOV_EN=1
        - NUM_OF_VFS=<NUM_VFS>
        - LAG_RESOURCE_ALLOCATION=1
        - NUM_VF_MSIX=48
  ovs:
    rawConfigScript: IyEvYmluL2Jhc2gKCl9vdnMtdnNjdGwoKSB7CiAgb3ZzLXZzY3RsIC0tbm8td2FpdCAtLXRpbWVvdXQgMTUgIiRAIgp9Cgpfb3ZzLXZzY3RsIHNldCBPcGVuX3ZTd2l0Y2ggLiBvdGhlcl9jb25maWc6ZG9jYS1pbml0PXRydWUKX292cy12c2N0bCBzZXQgT3Blbl92U3dpdGNoIC4gb3RoZXJfY29uZmlnOmRwZGstbWF4LW1lbXpvbmVzPTUwMDAwCl9vdnMtdnNjdGwgc2V0IE9wZW5fdlN3aXRjaCAuIG90aGVyX2NvbmZpZzpody1vZmZsb2FkPXRydWUKX292cy12c2N0bCBzZXQgT3Blbl92U3dpdGNoIC4gb3RoZXJfY29uZmlnOnBtZC1xdWlldC1pZGxlPXRydWUKX292cy12c2N0bCBzZXQgT3Blbl92U3dpdGNoIC4gb3RoZXJfY29uZmlnOm1heC1pZGxlPTIwMDAwCl9vdnMtdnNjdGwgc2V0IE9wZW5fdlN3aXRjaCAuIG90aGVyX2NvbmZpZzptYXgtcmV2YWxpZGF0b3I9NTAwMApfb3ZzLXZzY3RsIC0taWYtZXhpc3RzIGRlbC1iciBvdnNicjEKX292cy12c2N0bCAtLWlmLWV4aXN0cyBkZWwtYnIgb3ZzYnIyCl9vdnMtdnNjdGwgLS1tYXktZXhpc3QgYWRkLWJyIGJyLXNmYwpfb3ZzLXZzY3RsIHNldCBicmlkZ2UgYnItc2ZjIGRhdGFwYXRoX3R5cGU9bmV0ZGV2Cl9vdnMtdnNjdGwgc2V0IGJyaWRnZSBici1zZmMgZmFpbF9tb2RlPXNlY3VyZQpfb3ZzLXZzY3RsIC0tbWF5LWV4aXN0IGFkZC1wb3J0IGJyLXNmYyBwMApfb3ZzLXZzY3RsIHNldCBJbnRlcmZhY2UgcDAgdHlwZT1kcGRrCl9vdnMtdnNjdGwgc2V0IEludGVyZmFjZSBwMCBtdHVfcmVxdWVzdD05MjE2Cl9vdnMtdnNjdGwgc2V0IFBvcnQgcDAgZXh0ZXJuYWxfaWRzOmRwZi10eXBlPXBoeXNpY2FsCl9vdnMtdnNjdGwgLS1tYXktZXhpc3QgYWRkLXBvcnQgYnItc2ZjIHAxCl9vdnMtdnNjdGwgc2V0IEludGVyZmFjZSBwMSB0eXBlPWRwZGsKX292cy12c2N0bCBzZXQgSW50ZXJmYWNlIHAxIG10dV9yZXF1ZXN0PTkyMTYKX292cy12c2N0bCBzZXQgUG9ydCBwMSBleHRlcm5hbF9pZHM6ZHBmLXR5cGU9cGh5c2ljYWwKCiMgQWN0aXZhdGUgRE9DQSBmb3IgT1ZOSwpfb3ZzLXZzY3RsIHNldCBPcGVuX3ZTd2l0Y2ggLiBleHRlcm5hbC1pZHM6b3ZuLWJyaWRnZS1kYXRhcGF0aC10eXBlPW5ldGRldgojIHNldHVwIG92bmt1YmUgbWFuYWdlZCBicmlkZ2UsIGJyLWRwdSAodGhpcyBjb3JyZXNwb25kcyB0byBici1leCBvbiBvdm5rIGRvY3MpCl9vdnMtdnNjdGwgLS1tYXktZXhpc3QgYWRkLWJyIGJyLWRwdQpfb3ZzLXZzY3RsIGJyLXNldC1leHRlcm5hbC1pZCBici1kcHUgYnJpZGdlLWlkIGJyLWRwdQpfb3ZzLXZzY3RsIGJyLXNldC1leHRlcm5hbC1pZCBici1kcHUgYnJpZGdlLXVwbGluayBwYnJkcHV0b2Jyb3ZuCl9vdnMtdnNjdGwgc2V0IGJyaWRnZSBici1kcHUgZGF0YXBhdGhfdHlwZT1uZXRkZXYKX292cy12c2N0bCBzZXQgSW50ZXJmYWNlIGJyLWRwdSBtdHVfcmVxdWVzdD05MDAwCl9vdnMtdnNjdGwgLS1tYXktZXhpc3QgYWRkLXBvcnQgYnItZHB1IHBmMGhwZgpfb3ZzLXZzY3RsIHNldCBJbnRlcmZhY2UgcGYwaHBmIG10dV9yZXF1ZXN0PTkyMTYKX292cy12c2N0bCBzZXQgSW50ZXJmYWNlIHBmMGhwZiB0eXBlPWRwZGsKCiMgQ3JlYXRlIHN3aXRjaGluZyBPVlMgYnJpZGdlIGluIGJldHdlZW4gdGhlIFNDIG1hbmFnZWQgYnJpZGdlIGFuZCBPVk5LCl9vdnMtdnNjdGwgLS1tYXktZXhpc3QgYWRkLWJyIGJyLW92bgpfb3ZzLXZzY3RsIHNldCBicmlkZ2UgYnItb3ZuIGRhdGFwYXRoX3R5cGU9bmV0ZGV2Cl9vdnMtdnNjdGwgc2V0IEludGVyZmFjZSBici1vdm4gbXR1X3JlcXVlc3Q9OTAwMApfb3ZzLXZzY3RsIC0tbWF5LWV4aXN0IGFkZC1wb3J0IGJyLW92biBwYnJvdm50b2JyZHB1Cl9vdnMtdnNjdGwgLS1tYXktZXhpc3QgYWRkLXBvcnQgYnItZHB1IHBicmRwdXRvYnJvdm4KCiMgUGF0Y2ggYnItb3ZuIGFuZCBici1kcHUgdG9nZXRoZXIKX292cy12c2N0bCBzZXQgaW50ZXJmYWNlIHBicm92bnRvYnJkcHUgdHlwZT1wYXRjaCBvcHRpb25zOnBlZXI9cGJyZHB1dG9icm92bgpfb3ZzLXZzY3RsIHNldCBpbnRlcmZhY2UgcGJyZHB1dG9icm92biB0eXBlPXBhdGNoIG9wdGlvbnM6cGVlcj1wYnJvdm50b2JyZHB1Cg==