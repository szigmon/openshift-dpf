apiVersion: operator.dpu.nvidia.com/v1alpha1
kind: DPFOperatorConfig
metadata:
  name: dpfoperatorconfig
  namespace: dpf-operator-system
spec:
  imagePullSecrets:
    - dpf-pull-secret
  # Kamaji is permanently disabled - only Hypershift is supported
  kamajiClusterManager:
    disable: true
  # Trimmed multus chart for deploying system NADs only
  multus:
    # TODO: Update to official v25.7 chart once paths are verified
    # The custom chart was needed for lib64 path support, but v25.7 official chart
    # now supports this via dpuOpenvSwitchSystemSharedLib64Path override
    helmChart: oci://quay.io/itsoiref/dpf-system-helm/dpu-networking:v0.1.0
  overrides:
    kubernetesAPIServerVIP: api.<CLUSTER_NAME>.<BASE_DOMAIN>
    kubernetesAPIServerPort: 6443
    dpuCNIBinPath: /var/lib/cni/bin/
    dpuCNIPath: /run/multus/cni/net.d/
    # Configure lib64 path for RHCOS systems
    dpuOpenvSwitchSystemSharedLib64Path: /lib64
    # When using OpenShift Multus (default), Flannel needs to install CNI config
    flannelSkipCNIConfigInstallation: false
  provisioningController:
    bfCFGTemplateConfigMap: custom-bfb.cfg
    bfbPVCName: bfb-pvc
    dmsTimeout: 900
  staticClusterManager:
    disable: false
